# Epic 3 Retrospective – Dashboard & UX

**Epic:** 3  
**Epic Title:** Dashboard Layout, Staleness, and Filters  
**Date:** 2025-11-21  
**Participants:** stefano (Developer / Project Lead), Bob (Scrum Master, AI assistant)

---

## 1. Epic Overview

Epic 3 turned the data engine from Epic 2 into a usable dashboard: a split-pane layout, a virtualized feed grid, time-based staleness indicators, and user-controllable filters that shape the opportunity stream without touching the underlying adapters.

- **3.1 – Main Layout (Split Pane):** Left/right pane structure that anchors the feed and prepares space for future detail or signal panes.
- **3.2 – Feed Left Pane Data Grid:** Virtualized grid for `ArbitrageOpportunity[]` snapshots, including sorting and selection behaviours consistent with the Orange Terminal design.
- **3.3 – Visual Staleness Logic:** Time-since-update labels and opacity-based visual de-emphasis for stale opportunities, backed by a lightweight client-side ticker.
- **3.4 – Filters & Controls:** Region/sport/market/ROI filters with persisted UI preferences and a filtered empty state, all layered on top of the canonical opportunity model.
- **3.5 – Provider System Status Indicators:** High-level provider/system status surfaced in the dashboard (building on logging and heartbeat signals from Epic 2).

Epic status: **Complete** (Stories 3.1–3.5 done; retrospective recorded).

---

## 2. What Went Well

1. **Cohesive dashboard experience across stories**
   - Layout, grid, staleness, and filters compose cleanly into a single dashboard rather than feeling like four separate experiments.
2. **Strong test coverage for UX-critical behaviour**
   - Staleness logic, timer-driven updates, filters, persisted preferences, and filtered empty states are covered by tests, reducing fear of regressions.
3. **Architecture boundaries respected**
   - The dashboard operates purely over normalized `ArbitrageOpportunity[]` snapshots; no shortcuts into adapters or the poller, keeping Epic 2’s contracts intact.
4. **Staleness and filters match PRD intent**
   - Users can see at a glance which opportunities are fresh vs stale and can shape the feed via filters without extra mental gymnastics.
5. **Good reuse of earlier epic work**
   - Logging, rate limiting, and canonical types from Epics 1–2 are leveraged instead of re-solved in the UI.

---

## 3. What Was Challenging

1. **Tight coupling between dashboard pieces**
   - Layout, grid, staleness, and filters rely on each other; small changes to one piece can ripple through tests and behaviours in others.
2. **Filter semantics and UX expectations**
   - Getting “empty selection” vs “no filter” semantics to feel intuitive took iteration; adding more dimensions later could re-open this complexity.
3. **Maintaining performance with staleness ticks**
   - Ensuring the 30-second staleness ticker plays well with virtualization and doesn’t cause unnecessary work required careful attention.
4. **Status and staleness signalling**
   - Balancing visual de-emphasis, accessibility, and clear status indicators so staleness doesn’t conflict with other visual states (selection, ROI, status) needed deliberate tuning.
5. **League/region mapping risk**
   - Some mapping logic that underpins filters risks drift as more providers, sports, or regions are introduced.

---

## 4. Key Lessons Learned

1. **Define semantics centrally for UX-critical concepts**
   - Staleness thresholds, filter behaviour, and empty-state rules need a single source of truth to avoid subtle inconsistencies across components and tests.
2. **Virtualization + background updates require discipline**
   - Timer-based updates over a virtualized grid demand careful state management to avoid unnecessary re-renders or hidden performance issues.
3. **Architecture boundaries pay off in the UI**
   - Treating the dashboard as a pure consumer of `ArbitrageOpportunity[]` (rather than re-implementing data logic) kept the implementation focused and testable.
4. **Persisted preferences must be intentional**
   - Persisting filters is powerful but can surprise users; clear defaults and visible “active filters” cues are important to keep the dashboard trustworthy.
5. **Provider health and UX are tightly linked**
   - Status indicators and staleness signals depend on consistent logging and heartbeats; UX reliability rests on those underlying signals being trustworthy.

---

## 5. Action Items

**E3-AI-01 – Centralize dashboard semantics**  
- **Description:** Capture staleness thresholds, filter semantics, empty-state behaviour, and “active filters” rules in a short dashboard behaviour doc (or an extension of existing epic docs) to act as a single source of truth.  
- **Owner:** stefano  
- **When to apply:** Early in Epic 4, before adding more filters or panes.

**E3-AI-02 – Harden league/region/market mapping**  
- **Description:** Centralize league → region/market mapping used by filters and adapters, and reuse it consistently to avoid drift as new providers or sports are added.  
- **Owner:** stefano  
- **When to apply:** Before onboarding additional regions/sports or providers.

**E3-AI-03 – Monitor dashboard performance under load**  
- **Description:** Add a lightweight manual or automated check that renders the dashboard with a large opportunity set and ensures staleness ticks and filters remain responsive with virtualization enabled.  
- **Owner:** stefano  
- **When to apply:** As part of future dashboard enhancements (e.g., Epic 4).

**E3-AI-04 – Align provider status with user expectations**  
- **Description:** Review how provider/system status indicators are surfaced in the UI and copy-tune them so users can quickly understand “is my feed healthy?” without reading logs.  
- **Owner:** stefano  
- **When to apply:** During Epic 4 work on signals and error surfacing.

**E3-AI-05 – Reuse Epic 3 patterns in future UI work**  
- **Description:** Treat Epic 3’s combination of virtualization, staleness, and filters as the baseline pattern for new panes (e.g., signal preview, advanced workflows) rather than designing one-off solutions.  
- **Owner:** stefano  
- **When to apply:** When shaping and implementing Epic 4+ dashboard stories.

---

## 6. Next Epic Preparation (Epic 4 – Signals & Workflow UX)

- **Focus:** Build on the stable dashboard to introduce richer signal preview, keyboard navigation, copy/advance workflow, and structured error surfacing, all without compromising clarity or performance.
- **Dependencies from Epic 3:**
  - Split-pane layout and feed grid remain the primary surfaces for signals.
  - Staleness and filters continue to shape user trust in the feed; new features must respect those semantics.
  - Provider/system status indicators rely on Epic 2 logging and heartbeats.
- **Readiness Check:**
  - All core Epic 3 stories (3.1–3.5) are **done**, with good test coverage over staleness and filter behaviour.
  - This retrospective document is saved and can be referenced when shaping Epic 4 stories and UX decisions.

Bob (Scrum Master): "Epic 3 gave you a coherent, test-backed dashboard that users can trust. Epic 4 is your chance to layer richer signal workflows on top of this foundation without sacrificing clarity, performance, or correctness."

